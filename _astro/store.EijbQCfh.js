import{$ as b,j as R,k as E,l as N,d as V}from"./solid.DpHlNcnm.js";const T=Symbol("store-raw"),j=Symbol("store-node"),w=Symbol("store-has"),I=Symbol("store-self");function L(n){let e=n[b];if(!e&&(Object.defineProperty(n,b,{value:e=new Proxy(n,Y)}),!Array.isArray(n))){const i=Object.keys(n),s=Object.getOwnPropertyDescriptors(n);for(let f=0,o=i.length;f<o;f++){const t=i[f];s[t].get&&Object.defineProperty(n,t,{enumerable:s[t].enumerable,get:s[t].get.bind(e)})}}return e}function P(n){let e;return n!=null&&typeof n=="object"&&(n[b]||!(e=Object.getPrototypeOf(n))||e===Object.prototype||Array.isArray(n))}function y(n,e=new Set){let i,s,f,o;if(i=n!=null&&n[T])return i;if(!P(n)||e.has(n))return n;if(Array.isArray(n)){Object.isFrozen(n)?n=n.slice(0):e.add(n);for(let t=0,u=n.length;t<u;t++)f=n[t],(s=y(f,e))!==f&&(n[t]=s)}else{Object.isFrozen(n)?n=Object.assign({},n):e.add(n);const t=Object.keys(n),u=Object.getOwnPropertyDescriptors(n);for(let r=0,l=t.length;r<l;r++)o=t[r],!u[o].get&&(f=n[o],(s=y(f,e))!==f&&(n[o]=s))}return n}function a(n,e){let i=n[e];return i||Object.defineProperty(n,e,{value:i=Object.create(null)}),i}function S(n,e,i){if(n[e])return n[e];const[s,f]=V(i,{equals:!1,internal:!0});return s.$=f,n[e]=s}function X(n,e){const i=Reflect.getOwnPropertyDescriptor(n,e);return!i||i.get||!i.configurable||e===b||e===j||(delete i.value,delete i.writable,i.get=()=>n[b][e]),i}function C(n){N()&&S(a(n,j),I)()}function W(n){return C(n),Reflect.ownKeys(n)}const Y={get(n,e,i){if(e===T)return n;if(e===b)return i;if(e===E)return C(n),i;const s=a(n,j),f=s[e];let o=f?f():n[e];if(e===j||e===w||e==="__proto__")return o;if(!f){const t=Object.getOwnPropertyDescriptor(n,e);N()&&(typeof o!="function"||n.hasOwnProperty(e))&&!(t&&t.get)&&(o=S(s,e,o)())}return P(o)?L(o):o},has(n,e){return e===T||e===b||e===E||e===j||e===w||e==="__proto__"?!0:(N()&&S(a(n,w),e)(),e in n)},set(){return!0},deleteProperty(){return!0},ownKeys:W,getOwnPropertyDescriptor:X};function O(n,e,i,s=!1){if(!s&&n[e]===i)return;const f=n[e],o=n.length;i===void 0?(delete n[e],n[w]&&n[w][e]&&f!==void 0&&n[w][e].$()):(n[e]=i,n[w]&&n[w][e]&&f===void 0&&n[w][e].$());let t=a(n,j),u;if((u=S(t,e,f))&&u.$(()=>i),Array.isArray(n)&&n.length!==o){for(let r=n.length;r<o;r++)(u=t[r])&&u.$();(u=S(t,"length",o))&&u.$(n.length)}(u=t[I])&&u.$()}function q(n,e){const i=Object.keys(e);for(let s=0;s<i.length;s+=1){const f=i[s];O(n,f,e[f])}}function B(n,e){if(typeof e=="function"&&(e=e(n)),e=y(e),Array.isArray(e)){if(n===e)return;let i=0,s=e.length;for(;i<s;i++){const f=e[i];n[i]!==f&&O(n,i,f)}O(n,"length",s)}else q(n,e)}function K(n,e,i=[]){let s,f=n;if(e.length>1){s=e.shift();const t=typeof s,u=Array.isArray(n);if(Array.isArray(s)){for(let r=0;r<s.length;r++)K(n,[s[r]].concat(e),i);return}else if(u&&t==="function"){for(let r=0;r<n.length;r++)s(n[r],r)&&K(n,[r].concat(e),i);return}else if(u&&t==="object"){const{from:r=0,to:l=n.length-1,by:c=1}=s;for(let d=r;d<=l;d+=c)K(n,[d].concat(e),i);return}else if(e.length>1){K(n[s],e,[s].concat(i));return}f=n[s],i=[s].concat(i)}let o=e[0];typeof o=="function"&&(o=o(f,i),o===f)||s===void 0&&o==null||(o=y(o),s===void 0||P(f)&&P(o)&&!Array.isArray(o)?q(f,o):O(n,s,o))}function U(...[n,e]){const i=y(n||{}),s=Array.isArray(i),f=L(i);function o(...t){R(()=>{s&&t.length===1?B(i,t[0]):K(i,t)})}return[f,o]}function G(n,e){const i=Reflect.getOwnPropertyDescriptor(n,e);return!i||i.get||i.set||!i.configurable||e===b||e===j||(delete i.value,delete i.writable,i.get=()=>n[b][e],i.set=s=>n[b][e]=s),i}const J={get(n,e,i){if(e===T)return n;if(e===b)return i;if(e===E)return C(n),i;const s=a(n,j),f=s[e];let o=f?f():n[e];if(e===j||e===w||e==="__proto__")return o;if(!f){const t=Object.getOwnPropertyDescriptor(n,e),u=typeof o=="function";if(N()&&(!u||n.hasOwnProperty(e))&&!(t&&t.get))o=S(s,e,o)();else if(o!=null&&u&&o===Array.prototype[e])return(...r)=>R(()=>Array.prototype[e].apply(i,r))}return P(o)?H(o):o},has(n,e){return e===T||e===b||e===E||e===j||e===w||e==="__proto__"?!0:(N()&&S(a(n,w),e)(),e in n)},set(n,e,i){return R(()=>O(n,e,y(i))),!0},deleteProperty(n,e){return R(()=>O(n,e,void 0,!0)),!0},ownKeys:W,getOwnPropertyDescriptor:G};function H(n){let e=n[b];if(!e){Object.defineProperty(n,b,{value:e=new Proxy(n,J)});const i=Object.keys(n),s=Object.getOwnPropertyDescriptors(n),f=Object.getPrototypeOf(n),o=f!==null&&n!==null&&typeof n=="object"&&!Array.isArray(n)&&f!==Object.prototype;if(o){let t=f;for(;t!=null;){const u=Object.getOwnPropertyDescriptors(t);i.push(...Object.keys(u)),Object.assign(s,u),t=Object.getPrototypeOf(t)}}for(let t=0,u=i.length;t<u;t++){const r=i[t];if(!(o&&r==="constructor")){if(s[r].get){const l=s[r].get.bind(e);Object.defineProperty(n,r,{get:l,configurable:!0})}if(s[r].set){const l=s[r].set;Object.defineProperty(n,r,{set:d=>R(()=>l.call(e,d)),configurable:!0})}}}}return e}function Z(n,e){const i=y(n||{});return H(i)}const z=Symbol("store-root");function _(n,e,i,s,f){const o=e[i];if(n===o)return;const t=Array.isArray(n);if(i!==z&&(!P(n)||!P(o)||t!==Array.isArray(o)||f&&n[f]!==o[f])){O(e,i,n);return}if(t){if(n.length&&o.length&&(!s||f&&n[0]&&n[0][f]!=null)){let l,c,d,h,A,g,M,$;for(d=0,h=Math.min(o.length,n.length);d<h&&(o[d]===n[d]||f&&o[d]&&n[d]&&o[d][f]&&o[d][f]===n[d][f]);d++)_(n[d],o,d,s,f);const D=new Array(n.length),F=new Map;for(h=o.length-1,A=n.length-1;h>=d&&A>=d&&(o[h]===n[A]||f&&o[h]&&n[A]&&o[h][f]&&o[h][f]===n[A][f]);h--,A--)D[A]=o[h];if(d>A||d>h){for(c=d;c<=A;c++)O(o,c,n[c]);for(;c<n.length;c++)O(o,c,D[c]),_(n[c],o,c,s,f);o.length>n.length&&O(o,"length",n.length);return}for(M=new Array(A+1),c=A;c>=d;c--)g=n[c],$=f&&g?g[f]:g,l=F.get($),M[c]=l===void 0?-1:l,F.set($,c);for(l=d;l<=h;l++)g=o[l],$=f&&g?g[f]:g,c=F.get($),c!==void 0&&c!==-1&&(D[c]=o[l],c=M[c],F.set($,c));for(c=d;c<n.length;c++)c in D?(O(o,c,D[c]),_(n[c],o,c,s,f)):O(o,c,n[c])}else for(let l=0,c=n.length;l<c;l++)_(n[l],o,l,s,f);o.length>n.length&&O(o,"length",n.length);return}const u=Object.keys(n);for(let l=0,c=u.length;l<c;l++)_(n[u[l]],o,u[l],s,f);const r=Object.keys(o);for(let l=0,c=r.length;l<c;l++)n[r[l]]===void 0&&O(o,r[l],void 0)}function x(n,e={}){const{merge:i,key:s="id"}=e,f=y(n);return o=>{if(!P(o)||!P(f))return f;const t=_(f,{[z]:o},z,i,s);return t===void 0?o:t}}export{Z as a,U as c,x as r};
